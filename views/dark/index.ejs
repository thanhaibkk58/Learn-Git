<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title><%= user.firstname + " " + user.lastname %></title>

    <!-- Favicon -->
    <link rel="icon" href="../../public/dist/media/img/favicon.png" type="image/png">

    <!-- Soho css -->
    <!--    <link rel="stylesheet" href="../../public/dist/css/soho.min.css" type="text/css">-->
    <link rel="stylesheet" href="stylesheets/style.css" type="text/css">
</head>
<body class="dark">

<!-- page loading -->
<div class=""></div>
<!-- ./ page loading -->

<!-- disconnected modal -->
<div class="modal fade" id="disconnected" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"
     aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered modal-dialog-zoom" role="document">
        <div class="modal-content">
            <div class="modal-body">
                <div class="connection-error">
                    <h4 class="text-center">Application disconnected...</h4>
                    <svg version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg"
                         xmlns:xlink="http://www.w3.org/1999/xlink" x="0px"
                         y="0px"
                         width="862.899px" height="862.9px" viewBox="0 0 862.899 862.9"
                         style="enable-background:new 0 0 862.899 862.9;"
                         xml:space="preserve">
                        <g>
                            <g>
                                <circle cx="385.6" cy="656.1" r="79.8"/>
                                <path d="M561.7,401c-15.801-10.3-32.601-19.2-50.2-26.6c-39.9-16.9-82.3-25.5-126-25.5c-44.601,0-87.9,8.9-128.6,26.6
                                    c-39.3,17-74.3,41.3-104.1,72.2L253.5,545c34.899-36.1,81.8-56,132-56c49,0,95.1,19.1,129.8,53.8l25.4-25.399L493,469.7L561.7,401
                                    z"/>
                                <path d="M385.6,267.1c107.601,0,208.9,41.7,285.3,117.4l98.5-99.5c-50-49.5-108.1-88.4-172.699-115.6
                                    c-66.9-28.1-138-42.4-211.101-42.4c-73.6,0-145,14.4-212.3,42.9c-65,27.5-123.3,66.8-173.3,116.9l99,99
                                    C175.5,309.299,277.3,267.1,385.6,267.1z"/>
                                <polygon points="616.8,402.5 549.7,469.599 639.2,559.099 549.7,648.599 616.8,715.7 706.3,626.2 795.8,715.7 862.899,648.599
                                    773.399,559.099 862.899,469.599 795.8,402.5 706.3,492 		"/>
                            </g>
                        </g>
                        <g></g>
                        <g></g>
                        <g></g>
                        <g></g>
                        <g></g>
                        <g></g>
                        <g></g>
                        <g></g>
                        <g></g>
                        <g></g>
                        <g></g>
                        <g></g>
                        <g></g>
                        <g></g>
                        <g></g>
                    </svg>
                </div>
            </div>
            <div class="modal-footer justify-content-center">
                <button type="button" class="btn btn-primary btn-lg">Reconnect</button>
            </div>
        </div>
    </div>
</div>
<!-- ./ disconnected modal -->

<!-- add friends modal -->
<div class="modal fade" id="addFriends" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"
     aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered modal-dialog-zoom" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">
                    <i class="ti-user"></i> Add Friends
                </h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <i class="ti-close"></i>
                </button>
            </div>
            <div class="modal-body">
                <div class="alert alert-info">Send invitations to friends.</div>
                <form>
                    <div class="form-group">
                        <label for="emails" class="col-form-label">Email addresses</label>
                        <input type="text" class="form-control" id="emails">
                    </div>
                    <div class="form-group">
                        <label for="message" class="col-form-label">Invitation message</label>
                        <textarea class="form-control" id="message"></textarea>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-primary">Submit</button>
            </div>
        </div>
    </div>
</div>
<!-- ./ add friends modal -->

<!-- new group modal -->
<div class="modal fade" id="newGroup" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"
     aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered modal-dialog-zoom" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">
                    <i class="fa fa-users"></i> New Group
                </h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <i class="ti-close"></i>
                </button>
            </div>
            <div class="modal-body">
                <form>
                    <div class="form-group">
                        <label for="group_name" class="col-form-label">Group name</label>
                        <input type="text" class="form-control" id="group_name">
                    </div>
                    <div class="form-group">
                        <label for="users" class="col-form-label">Users</label>
                        <input type="text" class="form-control" id="users" placeholder="Find user">
                    </div>
                    <div class="form-group">
                        <div class="avatar-group">
                            <figure class="avatar">
                                <span class="avatar-title bg-success rounded-circle">E</span>
                            </figure>
                            <figure class="avatar">
                                <img src="https://via.placeholder.com/150" class="rounded-circle">
                            </figure>
                            <figure class="avatar">
                                <span class="avatar-title bg-danger rounded-circle">S</span>
                            </figure>
                            <figure class="avatar">
                                <img src="https://via.placeholder.com/150" class="rounded-circle">
                            </figure>
                            <figure class="avatar">
                                <span class="avatar-title bg-info rounded-circle">C</span>
                            </figure>
                            <a href="#">
                                <figure class="avatar">
                                    <span class="avatar-title bg-primary rounded-circle">+</span>
                                </figure>
                            </a>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="description" class="col-form-label">Description</label>
                        <textarea class="form-control" id="description"></textarea>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-primary">Create Group</button>
            </div>
        </div>
    </div>
</div>
<!-- ./ new group modal -->

<!-- setting modal -->
<div class="modal fade" id="settingModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"
     aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered modal-dialog-zoom" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">
                    <i class="ti-settings"></i> Settings
                </h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <i class="ti-close"></i>
                </button>
            </div>
            <div class="modal-body">
                <ul class="nav nav-tabs" role="tablist">
                    <li class="nav-item">
                        <a class="nav-link active" data-toggle="tab" href="#account" role="tab" aria-controls="account"
                           aria-selected="true">Account</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" data-toggle="tab" href="#notification" role="tab"
                           aria-controls="notification" aria-selected="false">Notification</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" data-toggle="tab" href="#contact" role="tab" aria-controls="contact"
                           aria-selected="false">Security</a>
                    </li>
                </ul>
                <div class="tab-content">
                    <div class="tab-pane show active" id="account" role="tabpanel">
                        <div class="form-item custom-control custom-switch">
                            <input type="checkbox" class="custom-control-input" checked id="customSwitch1">
                            <label class="custom-control-label" for="customSwitch1">Allow connected contacts</label>
                        </div>
                        <div class="form-item custom-control custom-switch">
                            <input type="checkbox" class="custom-control-input" checked id="customSwitch2">
                            <label class="custom-control-label" for="customSwitch2">Confirm message requests</label>
                        </div>
                        <div class="form-item custom-control custom-switch">
                            <input type="checkbox" class="custom-control-input" checked id="customSwitch3">
                            <label class="custom-control-label" for="customSwitch3">Profile privacy</label>
                        </div>
                        <div class="form-item custom-control custom-switch">
                            <input type="checkbox" class="custom-control-input" id="customSwitch4">
                            <label class="custom-control-label" for="customSwitch4">Developer mode options</label>
                        </div>
                        <div class="form-item custom-control custom-switch">
                            <input type="checkbox" class="custom-control-input" checked id="customSwitch5">
                            <label class="custom-control-label" for="customSwitch5">Two-step security
                                verification</label>
                        </div>
                    </div>
                    <div class="tab-pane" id="notification" role="tabpanel">
                        <div class="form-item custom-control custom-switch">
                            <input type="checkbox" class="custom-control-input" checked id="customSwitch6">
                            <label class="custom-control-label" for="customSwitch6">Allow mobile notifications</label>
                        </div>
                        <div class="form-item custom-control custom-switch">
                            <input type="checkbox" class="custom-control-input" id="customSwitch7">
                            <label class="custom-control-label" for="customSwitch7">Notifications from your
                                friends</label>
                        </div>
                        <div class="form-item custom-control custom-switch">
                            <input type="checkbox" class="custom-control-input" id="customSwitch8">
                            <label class="custom-control-label" for="customSwitch8">Send notifications by email</label>
                        </div>
                    </div>
                    <div class="tab-pane" id="contact" role="tabpanel">
                        <div class="form-item custom-control custom-switch">
                            <input type="checkbox" class="custom-control-input" id="customSwitch9">
                            <label class="custom-control-label" for="customSwitch9">Suggest changing passwords every
                                month.</label>
                        </div>
                        <div class="form-item custom-control custom-switch">
                            <input type="checkbox" class="custom-control-input" checked id="customSwitch10">
                            <label class="custom-control-label" for="customSwitch10">Let me know about suspicious
                                entries to your account</label>
                        </div>
                        <div class="form-item">
                            <p>
                                <a data-toggle="collapse" href="#collapseExample" role="button" aria-expanded="false"
                                   aria-controls="collapseExample">
                                    <span class="ti-plus btn-icon"></span> Security Questions
                                </a>
                            </p>
                            <div class="collapse" id="collapseExample">
                                <div class="form-group">
                                    <input type="text" class="form-control" placeholder="Question 1">
                                </div>
                                <div class="form-group">
                                    <input type="text" class="form-control" placeholder="Question 2">
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-primary">Save</button>
            </div>
        </div>
    </div>
</div>
<!-- ./ setting modal -->

<!-- edit profile modal -->
<div class="modal fade" id="editProfileModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"
     aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered modal-dialog-zoom" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">
                    <i class="ti-pencil"></i> Profile Edit
                </h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <i class="ti-close"></i>
                </button>
            </div>
            <div class="modal-body">
                <ul class="nav nav-tabs" role="tablist">
                    <li class="nav-item">
                        <a class="nav-link active" data-toggle="tab" href="#personal" role="tab"
                           aria-controls="personal" aria-selected="true">Personal</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" data-toggle="tab" href="#about" role="tab" aria-controls="about"
                           aria-selected="false">About</a>
                    </li>
                </ul>
                <div class="tab-content">
                    <div class="tab-pane show active" id="personal" role="tabpanel">
                        <form>
                            <div class="form-group">
                                <label for="email" class="col-form-label">ID</label>
                                <div class="input-group">
                                    <div class="input-group-prepend">
                                        <span class="input-group-text">
                                            <i class="ti-id-badge"></i>
                                        </span>
                                    </div>
                                    <input type="text" class="form-control" id="userID" value="<%= user._id %>"
                                           disabled>
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="email" class="col-form-label">Email</label>
                                <div class="input-group">
                                    <div class="input-group-prepend">
                                        <span class="input-group-text">
                                            <i class="ti-email"></i>
                                        </span>
                                    </div>
                                    <input type="text" class="form-control" id="email" value="<%= user.email %>">
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="fullname" class="col-form-label">Fullname</label>
                                <div class="input-group">
                                    <div class="input-group-prepend">
                                        <span class="input-group-text">
                                            <i class="ti-user"></i>
                                        </span>
                                    </div>
                                    <input type="text" class="form-control" id="fullname"
                                           value="<%= user.firstname + " " + user.lastname %>">
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-form-label">Avatar</label>
                                <div class="d-flex align-items-center">
                                    <div>
                                        <figure class="avatar mr-3 item-rtl">
                                            <img src="<%= user.avatar_url %>" class="rounded-circle">
                                        </figure>
                                    </div>
                                    <div class="custom-file">
                                        <input type="file" class="custom-file-input" id="customFile">
                                        <label class="custom-file-label" for="customFile">Choose file</label>
                                    </div>
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="city" class="col-form-label">City</label>
                                <div class="input-group">
                                    <div class="input-group-prepend">
                                        <span class="input-group-text">
                                            <i class="ti-map-alt"></i>
                                        </span>
                                    </div>
                                    <input type="text" class="form-control" id="city">
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="phone" class="col-form-label">Phone</label>
                                <div class="input-group">
                                    <div class="input-group-prepend">
                                        <span class="input-group-text">
                                            <i class="ti-mobile"></i>
                                        </span>
                                    </div>
                                    <input type="text" class="form-control" id="phone" placeholder="(555) 555 55 55">
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="website" class="col-form-label">Website</label>
                                <div class="input-group">
                                    <div class="input-group-prepend">
                                        <span class="input-group-text">
                                            <i class="ti-link"></i>
                                        </span>
                                    </div>
                                    <input type="text" class="form-control" id="website">
                                </div>
                            </div>
                        </form>
                    </div>
                    <div class="tab-pane" id="about" role="tabpanel">
                        <form action="">
                            <div class="form-group">
                                <label for="about-text" class="col-form-label">Write a few words that describe
                                    you</label>
                                <textarea class="form-control" id="about-text"></textarea>
                            </div>
                            <div class="custom-control custom-checkbox">
                                <input type="checkbox" class="custom-control-input" checked id="customCheck1">
                                <label class="custom-control-label" for="customCheck1">View profile</label>
                            </div>
                        </form>
                    </div>

                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-primary">Save</button>
            </div>
        </div>
    </div>
</div>
<!-- ./ edit profile modal -->

<!-- profile modal -->
<div class="modal fade" id="profileModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"
     aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered modal-dialog-zoom" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">Information</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <i class="ti-close"></i>
                </button>
            </div>
            <div class="modal-body">
                <div class="tab-content">
                    <div class="tab-pane show active" id="personal" role="tabpanel">
                        <form>

                            <img src="https://www.vasjamaica.com/sites/default/files/fb_avatar_0_0.jpg" alt="Avatar"
                                 class="rounded-circle" style="width:100px; padding-bottom: 20px">

                            <div class="form-group">
                                <label for="email" class="col-form-label">Email</label>
                                <div class="input-group">
                                    <div class="input-group-prepend">
                                        <span class="input-group-text">
                                            <i class="ti-email"></i>
                                        </span>
                                    </div>
                                    <input type="text" class="form-control" id="fr_email" disabled>
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="fullname" class="col-form-label">Fullname</label>
                                <div class="input-group">
                                    <div class="input-group-prepend">
                                        <span class="input-group-text">
                                            <i class="ti-user"></i>
                                        </span>
                                    </div>
                                    <input type="text" class="form-control" id="fr_fullname" disabled>
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="fullname" class="col-form-label">Sex</label>
                                <div class="input-group">
                                    <div class="input-group-prepend">
                                        <span class="input-group-text">
                                            <i class="ti-user"></i>
                                        </span>
                                    </div>
                                    <input type="text" class="form-control" id="fr_sex" disabled>
                                </div>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- ./ profile modal -->

<!-- layout -->
<div class="layout">

    <!-- navigation -->
    <nav class="navigation">
        <div class="nav-group">
            <ul>
                <li>
                    <a class="logo" href="#">
                        <svg version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg"
                             xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
                             width="33.004px" height="33.003px" viewBox="0 0 33.004 33.003"
                             style="enable-background:new 0 0 33.004 33.003;"
                             xml:space="preserve">
                            <g>
                                <path d="M4.393,4.788c-5.857,5.857-5.858,15.354,0,21.213c4.875,4.875,12.271,5.688,17.994,2.447l10.617,4.161l-4.857-9.998
                                    c3.133-5.697,2.289-12.996-2.539-17.824C19.748-1.072,10.25-1.07,4.393,4.788z M25.317,22.149l0.261,0.512l1.092,2.142l0.006,0.01
                                    l1.717,3.536l-3.748-1.47l-0.037-0.015l-2.352-0.883l-0.582-0.219c-4.773,3.076-11.221,2.526-15.394-1.646
                                    C1.469,19.305,1.469,11.481,6.277,6.672c4.81-4.809,12.634-4.809,17.443,0.001C27.919,10.872,28.451,17.368,25.317,22.149z"/>
                                <g>
                                    <circle cx="9.835" cy="16.043" r="1.833"/>
                                    <circle cx="15.502" cy="16.043" r="1.833"/>
                                    <circle cx="21.168" cy="16.043" r="1.833"/>
                                </g>
                            </g>
                            <g></g>
                            <g></g>
                            <g></g>
                            <g></g>
                            <g></g>
                            <g></g>
                            <g></g>
                            <g></g>
                            <g></g>
                            <g></g>
                            <g></g>
                            <g></g>
                            <g></g>
                            <g></g>
                            <g></g>
                        </svg>
                    </a>
                </li>
                <li>
                    <a data-navigation-target="chats" class="active" href="#">
                        <i class="ti-comment-alt"></i>
                    </a>
                </li>
                <li>
                    <a data-navigation-target="friends" href="#" class="notifiy_badge">
                        <i class="ti-user"></i>
                    </a>
                </li>
                <li data-navigation-target="favorites" class="brackets">
                    <a href="#">
                        <i class="ti-star"></i>
                    </a>
                </li>
                <li>
                    <a href="#" data-toggle="modal" data-target="#editProfileModal">
                        <i class="ti-pencil"></i>
                    </a>
                </li>
                <li>
                    <a href="#" data-toggle="modal" data-target="#settingModal">
                        <i class="ti-settings"></i>
                    </a>
                </li>
                <li>
                    <a href="/logout">
                        <i class="ti-power-off"></i>
                    </a>
                </li>
            </ul>
        </div>
    </nav>
    <!-- ./ navigation -->

    <!-- content -->
    <div class="content">

        <!-- sidebar group -->
        <div class="sidebar-group">

            <!-- Chats sidebar -->
            <div id="chats" class="sidebar active">
                <header>
                    <span>Chats</span>
                    <ul class="list-inline">
                        <li class="list-inline-item" data-toggle="tooltip" title="New Group">
                            <a class="btn btn-light" href="#" data-toggle="modal" data-target="#newGroup">
                                <i class="fa fa-users"></i>
                            </a>
                        </li>
                        <li class="list-inline-item">
                            <a class="btn btn-light" data-toggle="tooltip" title="New Chat" href="#"
                               data-navigation-target="friends">
                                <i class="ti-comment-alt"></i>
                            </a>
                        </li>
                        <li class="list-inline-item d-lg-none d-sm-block">
                            <a href="#" class="btn btn-light sidebar-close">
                                <i class="ti-close"></i>
                            </a>
                        </li>
                    </ul>
                </header>
                <form action="">
                    <input type="text" class="form-control" placeholder="Search chat">
                </form>
                <div class="sidebar-body">
                    <ul class="list-group list-group-flush" id="ul-list-friends">

                        <li class="list-group-item">
                            <div class="avatar-group">
                                <figure class="avatar">
                                    <span class="avatar-title bg-warning bg-success rounded-circle">
                                        <i class="fa fa-users"></i>
                                    </span>
                                </figure>
                            </div>
                            <div class="users-list-body">
                                <h5>Entertainment Group</h5>
                                <p><strong>Maher Ruslandi: </strong>Hello!!!</p>
                                <div class="users-list-action action-toggle">
                                    <div class="dropdown">
                                        <a data-toggle="dropdown" href="#">
                                            <i class="ti-more"></i>
                                        </a>
                                        <div class="dropdown-menu dropdown-menu-right">
                                            <a href="#" class="dropdown-item">Open</a>
                                            <a href="#" data-navigation-target="contact-information"
                                               class="dropdown-item">Profile</a>
                                            <a href="#" class="dropdown-item">Add to archive</a>
                                            <a href="#" class="dropdown-item">Delete</a>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </li>
                    </ul>
                </div>
            </div>
            <!-- ./ Chats sidebar -->

            <!-- Friends sidebar -->
            <div id="friends" class="sidebar">
                <header>
                    <span>Friends</span>
                    <ul class="list-inline">
                        <li class="list-inline-item">
                            <a class="btn btn-light" href="#" data-toggle="modal" data-target="#addFriends">
                                <i class="ti-plus btn-icon"></i> Add Friends
                            </a>
                        </li>
                        <li class="list-inline-item d-lg-none d-sm-block">
                            <a href="#" class="btn btn-light sidebar-close">
                                <i class="ti-close"></i>
                            </a>
                        </li>
                    </ul>
                </header>
                <form action="">
                    <input type="text" class="form-control" placeholder="Search Friends">
                </form>
                <div class="sidebar-body" style="overflow-y: scroll; height:400px;">
                    <ul class="list-group list-group-flush" id="ul-list-request-friends">
                        <!-- Add list friends-->
                    </ul>
                    <ul class="list-group list-group-flush" id="ul-sent-requests">
                        <!-- Add sent requests-->
                    </ul>
                    <ul class="list-group list-group-flush" id="ul-all-users">
                        <!-- Add sent requests-->
                    </ul>
                </div>
            </div>
            <!-- ./ Friends sidebar -->

            <!-- Favorites sidebar -->
            <div id="favorites" class="sidebar">
                <header>
                    <span>Favorites</span>
                    <ul class="list-inline">
                        <li class="list-inline-item d-lg-none d-sm-block">
                            <a href="#" class="btn btn-light sidebar-close">
                                <i class="ti-close"></i>
                            </a>
                        </li>
                    </ul>
                </header>
                <form action="">
                    <input type="text" class="form-control" placeholder="Search favorites">
                </form>
                <div class="sidebar-body">
                    <ul class="list-group list-group-flush users-list">
                        <li class="list-group-item">
                            <div class="users-list-body">
                                <h5>Jennica Kindred</h5>
                                <p>I know how important this file is to you. You can trust me ;)</p>
                                <div class="users-list-action action-toggle">
                                    <div class="dropdown">
                                        <a data-toggle="dropdown" href="#">
                                            <i class="ti-more"></i>
                                        </a>
                                        <div class="dropdown-menu dropdown-menu-right">
                                            <a href="#" class="dropdown-item">View Chat</a>
                                            <a href="#" class="dropdown-item">Forward</a>
                                            <a href="#" class="dropdown-item">Delete</a>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </li>
                        <li class="list-group-item">
                            <div class="users-list-body">
                                <h5>Marvin Rohan</h5>
                                <p>Lorem ipsum dolor sitsdc sdcsdc sdcsdcs</p>
                                <div class="users-list-action action-toggle">
                                    <div class="dropdown">
                                        <a data-toggle="dropdown" href="#">
                                            <i class="ti-more"></i>
                                        </a>
                                        <div class="dropdown-menu dropdown-menu-right">
                                            <a href="#" class="dropdown-item">View Chat</a>
                                            <a href="#" class="dropdown-item">Forward</a>
                                            <a href="#" class="dropdown-item">Delete</a>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </li>
                        <li class="list-group-item">
                            <div class="users-list-body">
                                <h5>Frans Hanscombe</h5>
                                <p>Lorem ipsum dolor sitsdc sdcsdc sdcsdcs</p>
                                <div class="users-list-action action-toggle">
                                    <div class="dropdown">
                                        <a data-toggle="dropdown" href="#">
                                            <i class="ti-more"></i>
                                        </a>
                                        <div class="dropdown-menu dropdown-menu-right">
                                            <a href="#" class="dropdown-item">View Chat</a>
                                            <a href="#" class="dropdown-item">Forward</a>
                                            <a href="#" class="dropdown-item">Delete</a>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </li>
                        <li class="list-group-item">
                            <div class="users-list-body">
                                <h5>Karl Hubane</h5>
                                <p>Lorem ipsum dolor sitsdc sdcsdc sdcsdcs</p>
                                <div class="users-list-action action-toggle">
                                    <div class="dropdown">
                                        <a data-toggle="dropdown" href="#">
                                            <i class="ti-more"></i>
                                        </a>
                                        <div class="dropdown-menu dropdown-menu-right">
                                            <a href="#" class="dropdown-item">View Chat</a>
                                            <a href="#" class="dropdown-item">Forward</a>
                                            <a href="#" class="dropdown-item">Delete</a>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </li>
                    </ul>
                </div>
            </div>
            <!-- ./ Stars sidebar -->

        </div>
        <!-- ./ sidebar group -->

        <!-- chat -->
        <div class="chat">
            <div class="chat-header">
                <div class="chat-header-user">
                    <figure class="avatar avatar-lg">
                        <img src="https://via.placeholder.com/150" id="fr_chat_avatar" class="rounded-circle">
                    </figure>
                    <div>
                        <h5 id="fr_chat_fullname">Fullname</h5>
                        <small class="text-muted">
                            <i>Online</i>
                        </small>
                    </div>
                </div>
                <div class="chat-header-action">
                    <ul class="list-inline">
                        <li class="list-inline-item">
                            <a href="#" class="btn btn-success">
                                <i class="fa fa-phone" aria-hidden="true"></i>
                            </a>
                        </li>
                        <li class="list-inline-item">
                            <a href="#" class="btn btn-secondary">
                                <i class="fa fa-video-camera" aria-hidden="true"></i>
                            </a>
                        </li>
                        <li class="list-inline-item">
                            <a href="#" class="btn btn-secondary" data-toggle="dropdown">
                                <i class="ti-more"></i>
                            </a>
                            <div class="dropdown-menu dropdown-menu-right">
                                <a href="#" data-navigation-target="contact-information"
                                   class="dropdown-item">Profile</a>
                                <a href="#" class="dropdown-item">Add to archive</a>
                                <a href="#" class="dropdown-item">Delete</a>
                                <div class="dropdown-divider"></div>
                                <a href="#" class="dropdown-item">Block</a>
                            </div>
                        </li>
                    </ul>
                </div>
            </div>
            <div class="chat-body"> <!-- .no-message -->
                <!--
                <div class="no-message-container">
                    <i class="fa fa-comments-o"></i>
                    <p>Select a chat to read messages</p>
                </div>
                -->
                <div class="messages">
                    <!--                    <div class="message-item outgoing-message">-->
                    <!--                        <div class="message-content">-->
                    <!--                            Hey, Maher! I'm waiting for you to send me the files.-->
                    <!--                        </div>-->
                    <!--                        <div class="message-action">-->
                    <!--                            Am 09:34 <i class="ti-double-check"></i>-->
                    <!--                        </div>-->
                    <!--                    </div>-->
                    <!--                    <div class="message-item">-->
                    <!--                        <div class="message-content">-->
                    <!--                            I'm sorry :( I'll send you as soon as possible.-->
                    <!--                        </div>-->
                    <!--                        <div class="message-action">-->
                    <!--                            Pm 14:20-->
                    <!--                        </div>-->
                    <!--                    </div>-->
                    <!--                    <div class="message-item outgoing-message">-->
                    <!--                        <div class="message-content">-->
                    <!--                            I'm waiting. Thank you :)-->
                    <!--                        </div>-->
                    <!--                        <div class="message-action">-->
                    <!--                            Pm 14:25 <i class="ti-double-check"></i>-->
                    <!--                        </div>-->
                    <!--                    </div>-->
                    <!--                    <div class="message-item">-->
                    <!--                        <div class="message-content">-->
                    <!--                            I'm sending files now.-->
                    <!--                        </div>-->
                    <!--                        <div class="message-action">-->
                    <!--                            Pm 14:20-->
                    <!--                        </div>-->
                    <!--                    </div>-->
                    <!--                    <div class="message-item">-->
                    <!--                        <div class="message-content message-file">-->
                    <!--                            <div class="file-icon">-->
                    <!--                                <i class="ti-file"></i>-->
                    <!--                            </div>-->
                    <!--                            <div>-->
                    <!--                                <div>important_documents.pdf <i class="text-muted small">(50KB)</i></div>-->
                    <!--                                <ul class="list-inline">-->
                    <!--                                    <li class="list-inline-item"><a href="#">Download</a></li>-->
                    <!--                                    <li class="list-inline-item"><a href="#">View</a></li>-->
                    <!--                                </ul>-->
                    <!--                            </div>-->
                    <!--                        </div>-->
                    <!--                        <div class="message-action">-->
                    <!--                            Pm 14:25-->
                    <!--                        </div>-->
                    <!--                    </div>-->
                    <!--                    <div class="message-item outgoing-message">-->
                    <!--                        <div class="message-content">-->
                    <!--                            Thank you so much. After I review these files, I will give you my opinion. If there's a-->
                    <!--                            problem, you can send it back. Good luck with!-->
                    <!--                        </div>-->
                    <!--                        <div class="message-action">-->
                    <!--                            Pm 14:50 <i title="Message could not be sent" class="ti-info-alt text-danger"></i>-->
                    <!--                        </div>-->
                    <!--                    </div>-->
                    <!--                    <div class="message-item">-->
                    <!--                        <div class="message-content">-->
                    <!--                            I can't wait-->
                    <!--                        </div>-->
                    <!--                        <div class="message-action">-->
                    <!--                            Pm 15:00-->
                    <!--                        </div>-->
                    <!--                    </div>-->
                    <!--                    <div class="message-item outgoing-message">-->
                    <!--                        <div class="message-content">-->
                    <!--                            I know how important this file is to you. You can trust me ;)-->
                    <!--                        </div>-->
                    <!--                        <div class="message-action">-->
                    <!--                            Pm 14:50 <i class="ti-double-check"></i>-->
                    <!--                        </div>-->
                    <!--                    </div>-->
                </div>
            </div>
            <div class="chat-footer">
                <form action="">
                    <input type="text" class="form-control" placeholder="Type a message ..."
                           aria-label="Recipient's username" aria-describedby="button-addon2">
                    <div class="form-buttons">
                        <button class="btn btn-light btn-floating" type="button">
                            <i class="fa fa-image"></i>
                        </button>
                        <button class="btn btn-light btn-floating" type="button">
                            <i class="fa fa-smile-o"></i>
                        </button>
                        <button id="send_message" class="btn btn-primary btn-floating" type="submit">
                            <i class="fa fa-send"></i>
                        </button>
                    </div>
                </form>
            </div>
        </div>
        <!-- ./ chat -->

        <div class="sidebar-group">
            <div id="contact-information" class="sidebar">
                <header>
                    <span>About</span>
                    <ul class="list-inline">
                        <li class="list-inline-item">
                            <a href="#" class="btn btn-light sidebar-close">
                                <i class="ti-close"></i>
                            </a>
                        </li>
                    </ul>
                </header>
                <div class="sidebar-body">
                    <div class="pl-4 pr-4 text-center">
                        <figure class="avatar avatar-state-danger avatar-xl mb-4">
                            <img src="https://via.placeholder.com/150" class="rounded-circle">
                        </figure>
                        <h5 class="text-primary">Frans Hanscombe</h5>
                        <p class="text-muted">Last seen: Today</p>
                    </div>
                    <hr>
                    <div class="pl-4 pr-4">
                        <h6>About</h6>
                        <p class="text-muted">I love reading, traveling and discovering new things. You need to be happy
                            in life.</p>
                    </div>
                    <hr>
                    <div class="pl-4 pr-4">
                        <h6>Phone</h6>
                        <p class="text-muted">(555) 555 55 55</p>
                    </div>
                    <hr>
                    <div class="pl-4 pr-4">
                        <h6>Media</h6>
                        <div class="files">
                            <ul class="list-inline">
                                <li class="list-inline-item">
                                    <a href="#">
                                        <figure class="avatar avatar-lg">
                                        <span class="avatar-title bg-warning">
                                            <i class="fa fa-file-pdf-o"></i>
                                        </span>
                                        </figure>
                                    </a>
                                </li>
                                <li class="list-inline-item">
                                    <a href="#">
                                        <figure class="avatar avatar-lg">
                                            <img src="https://via.placeholder.com/150">
                                        </figure>
                                    </a>
                                </li>
                                <li class="list-inline-item">
                                    <a href="#">
                                        <figure class="avatar avatar-lg">
                                            <img src="https://via.placeholder.com/150">
                                        </figure>
                                    </a>
                                </li>
                                <li class="list-inline-item">
                                    <a href="#">
                                        <figure class="avatar avatar-lg">
                                            <img src="https://via.placeholder.com/150">
                                        </figure>
                                    </a>
                                </li>
                                <li class="list-inline-item">
                                    <a href="#">
                                        <figure class="avatar avatar-lg">
                                        <span class="avatar-title bg-success">
                                            <i class="fa fa-file-excel-o"></i>
                                        </span>
                                        </figure>
                                    </a>
                                </li>
                                <li class="list-inline-item">
                                    <a href="#">
                                        <figure class="avatar avatar-lg">
                                        <span class="avatar-title bg-info">
                                            <i class="fa fa-file-text-o"></i>
                                        </span>
                                        </figure>
                                    </a>
                                </li>
                            </ul>
                        </div>
                    </div>
                    <hr>
                    <div class="pl-4 pr-4">
                        <h6>City</h6>
                        <p class="text-muted">Germany / Berlin</p>
                    </div>
                    <hr>
                    <div class="pl-4 pr-4">
                        <h6>Website</h6>
                        <p>
                            <a href="#">www.franshanscombe.com</a>
                        </p>
                    </div>
                    <hr>
                    <hr>
                    <div class="pl-4 pr-4">
                        <div class="form-group">
                            <div class="form-item custom-control custom-switch">
                                <input type="checkbox" class="custom-control-input" id="customSwitch11">
                                <label class="custom-control-label" for="customSwitch11">Block</label>
                            </div>
                        </div>
                        <div class="form-group">
                            <div class="form-item custom-control custom-switch">
                                <input type="checkbox" class="custom-control-input" checked="" id="customSwitch12">
                                <label class="custom-control-label" for="customSwitch12">Mute</label>
                            </div>
                        </div>
                        <div class="form-group">
                            <div class="form-item custom-control custom-switch">
                                <input type="checkbox" class="custom-control-input" id="customSwitch13">
                                <label class="custom-control-label" for="customSwitch13">Get notification</label>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

    </div>
    <!-- ./ content -->

</div>
<!-- ./ layout -->

<!-- JQuery -->
<!--<script src="../../public/vendor/jquery-3.4.1.min.js"></script>-->
<script src="vendor/jquery-3.4.1.min.js"></script>

<!-- Popper.js -->
<script src="vendor/popper.min.js"></script>

<!-- Bootstrap -->
<script src="vendor/bootstrap/bootstrap.min.js"></script>

<!-- Nicescroll -->
<script src="vendor/jquery.nicescroll.min.js"></script>

<!-- Soho -->
<script src="dist/js/soho.min.js"></script>

<!-- Examples -->
<script src="dist/js/examples.js"></script>

<script src="/socket.io/socket.io.js"></script>

<script type="text/javascript">
    var socket = io("/");
    var roomID;
    var receiverID;
    var users_temp = []; //

    var userID = document.getElementById("userID").value;

    socket.on("connect", function () {
        socket.emit("set-info-user", userID);
    });

    var ChatSocket = {
        Message: {
            add: function (message, time, type) {
                var chat_body = $('.layout .content .chat .chat-body');
                if (chat_body.length > 0) {

                    type = type ? type : '';
                    message = message ? message : 'Null';

                    $('.layout .content .chat .chat-body .messages').append('<div class="message-item ' + type + '"><div class="message-content">' + message + '</div><div class="message-action">' + time + ' ' + '' + (type ? '<i class="ti-check"></i>' : '') + '</div></div>');

                    chat_body.scrollTop(chat_body.get(0).scrollHeight, -1).niceScroll({
                        cursorcolor: 'rgba(66, 66, 66, 0.20)',
                        cursorwidth: "4px",
                        cursorborder: '0px'
                    }).resize();
                }
            }
        }
    };

    socket.on("set-all-request-friends", function (friends) {
        var json = JSON.parse(friends);
        let ul = document.getElementById("ul-list-request-friends");
        for (var i = 0; i < json.length; i++) {
            var friend = json[i].userID1;
            users_temp.push(friend._id);
            var li_item = document.createElement("li");
            li_item.className = "list-group-item";

            li_item.innerHTML = "" +
                "                            <div >\n" +
                "                                <figure class=\"avatar\">\n" +
                "                                    <img src=\"https://via.placeholder.com/150\" class=\"rounded-circle\">\n" +
                "                                </figure>\n" +
                "                            </div>\n" +
                "                            <div class=\"users-list-body\">\n" +
                "                                <h5 style=\"margin-bottom: 0.8rem\">" + friend.firstname + " " + friend.lastname + "</h5>\n" +
                "                                <div>\n" +
                "                                    <button type=\"button\" class=\"btn btn-primary btn-sm\">Confirm</button>\n" +
                "                                    &nbsp;\n" +
                "                                    <button type=\"button\" class=\"btn btn-secondary btn-sm\">Delete</button>\n" +
                "                                </div>\n" +
                "                            </div>"
            ul.appendChild(li_item);
        }
        $('#ul-list-request-friends li').click(function () {
            var index = $(this).index();
            $('#profileModal').modal();
            document.getElementById("fr_fullname").value = json[index].userID1.firstname + " " + json[index].userID1.lastname;
            document.getElementById("fr_email").value = json[index].userID1.email;
            document.getElementById("fr_sex").value = json[index].userID1.sex;
        });

        $('#ul-list-request-friends li button').click(function (event) {
            var index_li = $(this).parent().parent().parent().index();
            var index_button = $(this).index();
            event.stopPropagation();
            var id_request = json[index_li].userID1._id;
            if (index_button === 0) {
                socket.emit("confirm-request-friend", id_request);
                $(this).parent().html("&#10004; Done");
            }
            if (index_button === 1) {
                socket.emit("delete-request-friend", id_request);
                $(this).parent().html("&#10004; Deleted");
            }
        });
    });

    socket.on("get-all-users", function (data) {
        var json = JSON.parse(data);
        let ul = document.getElementById("ul-all-users");
        ul.innerHTML = "";
        for (var i = 0; i < json.length; i++) {
            var friend = json[i];
            var li_item = document.createElement("li");
            li_item.className = "list-group-item";

            li_item.innerHTML = "" +
                "                            <div >\n" +
                "                                <figure class=\"avatar\">\n" +
                "                                    <img src=\"https://via.placeholder.com/150\" class=\"rounded-circle\">\n" +
                "                                </figure>\n" +
                "                            </div>\n" +
                "                            <div class=\"users-list-body\">\n" +
                "                                <h5 style=\"margin-bottom: 0.8rem\">" + friend.firstname + " " + friend.lastname + "</h5>\n" +
                "                                <div>\n" +
                "                                    <button type=\"button\" class=\"btn btn-primary btn-sm\">Add Friend</button>\n" +
                "                                </div>\n" +
                "                            </div>"
            ul.appendChild(li_item);
        }
        $('#ul-all-users li').click(function () {
            var index = $(this).index();
            $('#profileModal').modal();
            document.getElementById("fr_fullname").value = json[index].firstname + " " + json[index].lastname;
            document.getElementById("fr_email").value = json[index].email;
            document.getElementById("fr_sex").value = json[index].sex;
        });

        $('#ul-all-users li button').click(function (event) {
            var index_li = $(this).parent().parent().parent().index();
            event.stopPropagation();
            var userID2 = json[index_li]._id;
            socket.emit("event-add-friend", userID2);
            $(this).hide();
            $(this).parent().html("&#10004; Sent Request");
        });
    });

    $(document).on('click', 'div.layout nav.navigation div.nav-group ul li a.notifiy_badge', function (event) {
        socket.emit("send-users-temp", users_temp);
    });

    $(document).on('submit', '.layout .content .chat .chat-footer form', function (e) {
        e.preventDefault();

        var input = $(this).find('input[type=text]');
        var message = input.val();

        message = $.trim(message);

        if (message) {
            console.log(new Date());
            ChatSocket.Message.add(message, formatDate(new Date()), 'outgoing-message');
            input.val('');
            socket.emit("send-message-to-server", {message: message, toUser: receiverID});
        } else {
            input.focus();
        }
    });

    socket.on("get-all-sent-request", function (data) {
        var json = JSON.parse(data);
        let ul = document.getElementById("ul-sent-requests");
        for (var i = 0; i < json.length; i++) {
            var friend = json[i].userID2;
            users_temp.push(friend._id);
            var li_item = document.createElement("li");
            li_item.className = "list-group-item";

            li_item.innerHTML = "" +
                "                            <div >\n" +
                "                                <figure class=\"avatar\">\n" +
                "                                    <img src=\"https://via.placeholder.com/150\" class=\"rounded-circle\">\n" +
                "                                </figure>\n" +
                "                            </div>\n" +
                "                            <div class=\"users-list-body\">\n" +
                "                                <h5 style=\"margin-bottom: 0.8rem\">" + friend.firstname + " " + friend.lastname + "</h5>\n" +
                "                                <div>\n" +
                "                                    <button type=\"button\" class=\"btn btn-secondary btn-sm\">Cancel Request</button>\n" +
                "                                </div>\n" +
                "                            </div>"
            ul.appendChild(li_item);
        }

        $('#ul-sent-requests li').click(function () {
            var index = $(this).index();
            $('#profileModal').modal();
            document.getElementById("fr_fullname").value = json[index].userID2.firstname + " " + json[index].userID2.lastname;
            document.getElementById("fr_email").value = json[index].userID2.email;
            document.getElementById("fr_sex").value = json[index].userID2.sex;
        });

        $('#ul-sent-requests li button').click(function (event) {
            var index_li = $(this).parent().parent().parent().index();
            event.stopPropagation();
            var userID2 = json[index_li].userID2._id;
            socket.emit("cancel-request-friend", userID2);
            $(this).hide();
            $(this).parent().html("&#10004; Request Cancelled");
        });
    });

    socket.on("get-old-messages", function (json_data) {
        var data = JSON.parse(json_data);
        for (var i = 0; i < data.length; i++) {
            var message = data[i].content;
            var date = formatDate(new Date(data[i].created_at));


            if (data[i].sender._id === userID) {
                ChatSocket.Message.add(message, date, 'outgoing-message');
            } else {
                ChatSocket.Message.add(message, date, '');
            }
        }
    });

    socket.on("emit-message-to-receiver", function (data) {
        var date = formatDate(new Date(data.created_at));
        ChatSocket.Message.add(data.content, date, '');
    });

    socket.on("set-all-friends", function (friends) {
        var json = JSON.parse(friends);
        var ul_list_friends = document.getElementById("ul-list-friends");
        // $('#ul-list-friends').empty();
        var list_friends = [];

        for (var i = 0; i < json.length; i++) {
            let friend;
            if (userID !== json[i].userID1._id) {
                friend = json[i].userID1;
            } else {
                friend = json[i].userID2
            }
            users_temp.push(friend._id);
            let li_list_friends = document.createElement("li");
            li_list_friends.className = "list-group-item";
            li_list_friends.innerHTML = "" +
                "                            <figure class=\"avatar\">\n" +
                "                                <img src=\" " + friend.avatar_url + "\" class=\"rounded-circle\">\n" +
                "                            </figure>\n" +
                "                            <div class=\"users-list-body\">\n" +
                "                                <h5>" + friend.firstname + " " + friend.lastname + "</h5>\n" +
                "                                <p>Click me....</p>\n" +
                "                            </div>"

            ul_list_friends.appendChild(li_list_friends);
            list_friends.push(friend);
        }

        $('#ul-list-friends li').click(function () {
            $('.layout .content .chat .chat-body .messages').empty();
            var index = $(this).index() - 1;
            room_id = json[index]._id;

            socket.emit("join-room", {userID: userID, room_id: room_id});

            document.getElementById("fr_chat_fullname").innerHTML = list_friends[index].firstname + " " + list_friends[index].lastname;
            document.getElementById("fr_chat_avatar").src = list_friends[index].avatar_url;
        });
    });


    function formatDate(date) {
        var hours = date.getHours();
        var minutes = date.getMinutes();
        var ampm = hours >= 12 ? 'PM' : 'AM';
        hours = hours % 12;
        hours = hours ? hours : 12; // the hour '0' should be '12'
        minutes = minutes < 10 ? '0' + minutes : minutes;
        var day = date.getDay();
        var month = date.getMonth();
        var year = date.getFullYear();
        var strTime = hours + ':' + minutes + ' ' + ampm + '  ' + day + '/' + month + '/' + year + ' ';
        return strTime;
    }

</script>


</body>
</html>
